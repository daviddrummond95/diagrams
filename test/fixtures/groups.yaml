title: "Microservices Architecture"
direction: LR

nodes:
  - id: gateway
    label: "API Gateway"
    icon: "ğŸŒ"
  - id: lb
    label: "Load Balancer"
    icon: "âš–ï¸"
  - id: auth
    label: "Auth Service"
    icon: "ğŸ”"
  - id: users
    label: "User Service"
    icon: "ğŸ‘¤"
  - id: orders
    label: "Order Service"
    icon: "ğŸ“¦"
  - id: postgres
    label: "PostgreSQL"
    icon: "ğŸ˜"
  - id: redis
    label: "Redis"
    icon: "ğŸ”´"
  - id: prometheus
    label: "Prometheus"
    icon: "ğŸ“Š"
  - id: grafana
    label: "Grafana"
    icon: "ğŸ“ˆ"

groups:
  - id: ingress
    label: "Ingress"
    members: [gateway, lb]
    direction: TB
    style:
      backgroundColor: "#F0F9FF"
      borderColor: "#BAE6FD"
      labelColor: "#0369A1"
  - id: services
    label: "Services"
    members: [auth, users, orders]
    direction: TB
    style:
      backgroundColor: "#F0FDF4"
      borderColor: "#BBF7D0"
      labelColor: "#166534"
  - id: data
    label: "Data Layer"
    members: [postgres, redis]
    direction: TB
    style:
      backgroundColor: "#FFF7ED"
      borderColor: "#FED7AA"
      labelColor: "#9A3412"
  - id: monitoring
    label: "Monitoring"
    members: [prometheus, grafana]
    direction: LR

rows:
  - [ingress, services, data]
  - [monitoring]

edges:
  - from: gateway
    to: lb
  - from: lb
    to: auth
  - from: lb
    to: users
  - from: lb
    to: orders
  - from: auth
    to: postgres
  - from: users
    to: postgres
  - from: orders
    to: postgres
  - from: auth
    to: redis
  - from: prometheus
    to: auth
    label: "scrape"
  - from: prometheus
    to: users
    label: "scrape"
  - from: prometheus
    to: grafana
